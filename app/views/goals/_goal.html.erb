<%
  page_id = page.id if defined?(page)
  page_id ||= params[:page_id]
  list_id = list.id if defined?(list)
  list_id ||= params[:list_id]
%>
<li id="goal_<%= goal.id %>"> 
  <%= link_to goal.name, edit_user_page_list_goal_path(current_user.id,page_id,list_id,goal.id), id: "goal_name_#{goal.id}", remote: true %>
  
  <%= link_to "x", user_page_list_goal_path(current_user.id,page_id,list_id,goal.id), method: 'delete', remote: true %> <br/>
  <%= form_tag user_page_list_goal_steps_path(current_user.id,page_id,list_id,goal.id), :class => "form-inline" do %>
    <%= text_field_tag "step[name]" %>
    <%= hidden_field_tag "step[goal_id]", goal.id %>
    <%= submit_tag "add a step" %>
  <% end %>
  <ul>
    <% goal.steps.each do |step| %>
      <%= render partial: "steps/step", locals: { page: page, list: list, goal: goal, step: step } %>
    <% end %>
  </ul>
</li>
